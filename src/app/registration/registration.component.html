<h1 class="page-title">Registration</h1>
<div class="container" *ngIf="isLoading">
  <div class="row">
    <h1 class="text-center mb-5">Success!</h1>
    <h4 class="text-center mb-5">Now you can login.</h4>
    <div
      class="d-flex justify-content-center align-items-center"
    >
      <img
        class="row img-fluid"
        src="assets/imgs/loadingClock.gif"
        alt="loading..."
      />
    </div>
  </div>
</div>

<div class="registration container pb-5" *ngIf="!isLoading">
  <div class="row justify-content-center">
    <form
      #postForm="ngForm"
      (ngSubmit)="onCreateUser(postForm.value, password.value)"
      class="col-md-4"
    >
      <div class="form-group py-sm-1 mb-0">
        <label for="username" class="col-sm-4col-form-label">Name:</label>
        <input
          id="username"
          name="username"
          type="text"
          class="form-control"
          minLength="4"
          required
          ngModel
        />
      </div>
      <div class="form-group py-sm-1 mb-0">
        <label for="email" class="col-sm-4col-form-label">Email:</label>
        <input
          id="email"
          name="email"
          type="text"
          class="form-control"
          email
          required
          ngModel
        />
      </div>
      <div class="form-group py-sm-1 mb-0">
        <label for="password" class="col-sm-4col-form-label">Password:</label>
        <input
          id="password"
          name="password"
          type="password"
          class="form-control"
          minLength="6"
          required
          ngModel
          #password="ngModel"
        />
      </div>
      <div class="form-group py-sm-1 mb-0">
        <label for="password-confirm" class="col-sm-4col-form-label"
          >Confirm password:</label
        >
        <input
          id="password-confirm"
          name="password-confirm"
          type="password"
          class="form-control"
          required
          ngModel
          #cpw="ngModel"
        />
      </div>
      <hr />
      <div class="col-xs-4 text-center">
        <button
          style="height: 50px"
          class="col-sm-12"
          type="submit"
          [disabled]="postForm.invalid || isFetching"
        >
          <h4>{{ isFetching? 'please wait...' : 'Registration'}}</h4>
        </button>
        <p *ngIf="error">{{ errorMessage }}</p>
      </div>
    </form>
  </div>
</div>
